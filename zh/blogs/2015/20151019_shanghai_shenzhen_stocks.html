<!DOCTYPE HTML>
<html lang="zh-cmn-Hans">

<head>
  <link rel="import" href="test.html">
<title>上海深圳股票历史数据 - 王冠嵩</title>
<meta charset="UTF-8">
<meta name="author" content="wangguansong@outlook.com">
<meta name="description" content="website">
<link rel="stylesheet" href="/layout.css" type="text/css">
<link rel="stylesheet" href="/design.css" type="text/css">
</head>

<body>

<header>
  <h1>王冠嵩的网站</h1>
  <nav>
    <ul>
      <li><a href="/zh/index.html">首页</a></li>
      <li><a href="/zh/aboutme.html">关于我</a></li>
      <li><a href="/zh/projects.html">项目</a></li>
      <li><a href="/zh/blog.html">文章</a></li>
      <li><a href="/zh/pictures.html">图片</a></li>
      <li><a href="/zh/updates.html">更新记录</a></li>
      <li><a href="/zh/links.html">相关链接</a></li>
      <li><a href="/en/index.html" lang="en">English</a></li>
    </ul>
  </nav>
</header>

<main>


<article id="content">
  
  <header>
    <h2>上海深圳股票历史数据</h2>
    <p>
    <span class="tags">
      标签：
    <a href="/zh/tags/2015.html">2015</a>，
    <a href="/zh/projects/china_stocks.html">沪深股票下载（R）</a>
    </span>
    <span class="datestamp">2015-10-19</span>
    </p>
    <p class="summary">
      R程序，用于下载和清理上海和深圳股票以及指数的每日价格和每日之内交易明细价格。
    </p>
  </header>
  
  <section>
    <p>R程序，用于下载和清理上海和深圳股票以及指数的每日价格和每日之内交易明细价格。数据来自于<a href="http://money.163.com">网易财经</a>，程序和变量名参考quantmod包。
    </p>
    <p>由于交易明细的下载格式是XLS，在保存和清理交易明细数据时，需要到把XLS文件转换为CSV文件。这里可以选择用Linux系统下的unoconv, gdata, 或libreoffice的命令行实现。这些方法只在Ubuntu14.04系统下可用。</p>
    
    <ul>
      <li>
        Github：<a href="https://github.com/wangguansong/get_chinese_stocks">https://github.com/wangguansong/get_chinese_stocks</a>
      </li>
      <li>
        上海深圳股票和指数历史价格（至2015/11/01）：<a href="http://pan.baidu.com/s/1HUuEq">百度盘</a>
      </li>
      <li>
        上海深圳股票每日交易明细：<a href="http://pan.baidu.com/s/1hrcaRNA">百度盘</a>
      </li>
    </ul>
  </section>
  
  <section>
    
    <dl>
      <dt>GetSymbols(HF).R</dt>
      <dd>下载每日（明细）价格，然后保存在文件或者载入到R空间中。</dd>
      <dt>CleanSymbols(HF).R</dt>
      <dd>清理下载的数据。</dd>
      <dt>GetAllSymbols(HF).R</dt>
      <dd>自动下载所有的股票和指数数据。</dd>
    </dl>
    
    <h4>用法例：</h4>
    <p>下载上证综合指数每日历史价格（从最早日期到今天），保存到csv文件，然
后载入到R空间中。以下写法效果相同：</p>
    <pre>
      GetSymbols("0000001")
      GetSymbols("000001", market="Shanghai")
      GetSymbols("0000001", savefile="SH000001.csv",
                         dfname="SH000001")
    </pre>
    
    <p>仅载入下载数据，不保存文件：</p>
    <pre>
      GetSymbols("0000001", savefile=NA)
    </pre>
    
    <p>仅保存文件，不载入数据：</p>
    <pre>
      GetSymbols("0000001", dfname=NA)
    </pre>
    
    <p>保存中文变量名</p>
    <pre>
      GetSymbols("0000001", translate=FALSE)
    </pre>
    
    <p>下载上证综合指数在2015年11月2日的交易明细，保存到xls文件：</p>
    <pre>
      GetSymbols("0000001", "20151102")
      GetSymbols("0000001", "20151102",
                 savefile="SH000001_20151102.xls")
    </pre>

    <p>清理"SH000001.csv"文件中的历史每日价格, 然后覆盖该文件：</p>
    <pre>
      CleanSymbols("SH000001.csv")
      CleanSymbols("SH000001.csv", savefile="SH000001.csv")
    </pre>
    
    <p>清理"SH000001.csv"文件中的历史每日价格，保存到RData文件：</p>
    <pre>
      CleanSymbols("SH000001.csv", savefile="SH000001.RData")
      CleanSymbols("SH000001.csv", savefile="SH000001.RData",
                   dfname="SH000001")
    </pre>
    
    <p>转换并清理"SH000001_20151102.xls"文件，保存到RData文件：</p>
    <pre>
      CleanSymbolsHF("SH000001_20151102.xls",
                     savefile="a_name_you_like.RData",
                     dfname="notsobigdata")
    </pre>
  </section>

</article>



</main>

<footer>
  <ul>
    <li>
      网站备案：
      <a href="http://www.miitbeian.gov.cn/">辽ICP备15012794号</a>
    </li>
  </ul>
</footer>
</body>
</html>
